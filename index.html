<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    </style>
    <title>Document</title>
</head>
<body>
    <h1>Alleyway Invaders</h1>
    <h2>It's NOT Space Invaders</h2>
    <p>Click the button to protect earth by destroying the 'invaders', despite the fact they came in peace...</p>
    <input type= "number" placeholder= "No. of Mother ships" id= "mothership-input"></input>
    <input type= "number" placeholder="No. of Attack ships" id= "attackship-input"></input>
    <input type= "number" placeholder="No. of Defence Ships" id= "defenceship-input"></input>
    <button onclick="doDamageOnClick()">Save the Earth from these untrustworthy neutral aliens!</button>
    <button onclick="startGame()">Start the game</button>
    <div id="prints-ships"></div>
<script>
    class Ship {
        constructor(shipName, hitPoints, damagePerHit) {
            this.shipName = shipName;
            this.hitPoints = hitPoints;
            this.damagePerHit = damagePerHit;
        };
    
            takeDamage() {
                this.hitPoints = this.hitPoints - this.damagePerHit;
            };
    };
    
    class AttackShip extends Ship {
        constructor() {
            super("AttackShip", 45, 12);
        };
    };
    
    class DefenceShip extends Ship {
        constructor() {
        super("DefenceShip", 80, 10);
        };
    };
    
    class MotherShip extends Ship {
        constructor() {
            super("MotherShip", 100, 9);
            };
    };
    
    const shipContainer = document.getElementById("prints-ships");
    
    let alienArray = [];
    
    const populateAlienArray = () => {
    
        const noOfMotherShips = parseInt(document.getElementById("mothership-input").value);
        const noOfAttackShips = parseInt(document.getElementById("attackship-input").value);
        const noOfDefenceShips = parseInt(document.getElementById("defenceship-input").value);
        const totalShips = noOfMotherShips + noOfAttackShips + noOfDefenceShips;
    
        for (let index = 0; index < totalShips; index++) {
    
            let newMotherShip;
            let newAttackShip;
            let newDefenceShip;
    
            if (index < noOfMotherShips) {
                newMotherShip = new MotherShip();
            alienArray.push(newMotherShip);
            } else if (index <= noOfAttackShips) {
                newAttackShip = new AttackShip(); 
                alienArray.push(newAttackShip);
            } else if (index <= totalShips) {
                newDefenceShip = new DefenceShip();
                alienArray.push(newDefenceShip);
            };
        };
    };
    
    const printTheHTML = () => {
        shipContainer.innerHTML = "";
    
        alienArray.forEach(ship => {
            shipContainer.innerHTML += `<p>${ship.shipName}: ${ship.hitPoints}</p>`;
        });
    };
    
    const damageRandomShip = () => {
        const randomShipIndex = [Math.floor(Math.random() * alienArray.length)]
        const randomShip = alienArray[randomShipIndex];
        randomShip.takeDamage();
        if (randomShip.hitPoints <= 0 && randomShip.shipName === "MotherShip") {
            alienArray = [];
            alert("You slaughtered our friends from across the stars");
            printTheHTML();
        } else if (randomShip.hitPoints <= 0) {
            alienArray.splice(randomShipIndex, 1);
        };
    };
    
    const doDamageOnClick = () => {
        printTheHTML();
        damageRandomShip(alienArray);
    };
    
    const startGame = () => {
        populateAlienArray();
        printTheHTML();
    };
</script>
</body>
</html>